@IsTest
public class Rest_ResourceTest 
{
	@IsTest
    Public static void ModigieCredentialstest()
    {
         RestRequest req = new RestRequest();
        RestResponse res = new RestResponse();
        req.requestURI = '/services/apexrest/modigie/credential'; //Request URL
        req.httpMethod = 'POST';
        req.addHeader('Content-Type', 'application/json');
        req.requestBody=blob.valueOf('{ "apiKey": { "keyString": "AAQnMIIEvwIBVmbTKShGMzF2JFW_EWdqyu" }, "serviceAccount": { "clientEmail": "salesforce-app@modigie-c-KShGMzF.iam.gserviceaccount.com", "privateKey": "MIIEvwIBVmbTKShGMEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMEvwIBVmbTKShGMzFEvwIBVmbTEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFKShGMzFzF2JFW+A==" }, "updateTime": "2022-05-30T23:59:44Z" }');
        
        RestContext.request = req;
        RestContext.response= res;
        
        ModigieCredentials.updateModigieCredentials();
        
       req.requestBody=blob.valueOf('{ "piKey" { "keyString": "AAQnMIIEvwIBVmbTKShGMzF2JFW_EWdqyu" }, "serviceAccount": { "clientEmail": "salesforce-app@modigie-c-KShGMzF.iam.gserviceaccount.com", "privateKey": "MIIEvwIBVmbTKShGMEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMEvwIBVmbTKShGMzFEvwIBVmbTEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFKShGMzFzF2JFW+A==" }, "updateTime": "2022-05-30T23:59:44Z" }');

        
        ModigieCredentials.updateModigieCredentials();
        
        req.requestBody=blob.valueOf('{ "apiKey": { "keyStriing": "AAQnMIIEvwIBVmbTKShGMzF2JFW_EWdqyu" }, "serviceAccount": { "clientEmail": "salesforce-app@modigie-c-KShGMzF.iam.gserviceaccount.com", "privateKey": "MIIEvwIBVmbTKShGMEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMEvwIBVmbTKShGMzFEvwIBVmbTEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFKShGMzFzF2JFW+A==" }, "updateTime": "2022-05-30T23:59:44Z" }');
		ModigieCredentials.updateModigieCredentials();
        
        
        req.requestBody=blob.valueOf('{ "apiKey": { "keyString": "AAQnMIIEvwIBVmbTKShGMzF2JFW_EWdqyu" }, "serviceAccount": { "clientEmal": "salesforce-app@modigie-c-KShGMzF.iam.gserviceaccount.com", "privateKey": "MIIEvwIBVmbTKShGMEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMEvwIBVmbTKShGMzFEvwIBVmbTEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFKShGMzFzF2JFW+A==" }, "updateTime": "2022-05-30T23:59:44Z" }');
		ModigieCredentials.updateModigieCredentials();
        
        
        req.requestBody=blob.valueOf('{ "apiKey": { "keyString": "AAQnMIIEvwIBVmbTKShGMzF2JFW_EWdqyu" }, "serviceAccount": { "clientEmail": "salesforce-app@modigie-c-KShGMzF.iam.gserviceaccount.com", "privateKeyv": "MIIEvwIBVmbTKShGMEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMEvwIBVmbTKShGMzFEvwIBVmbTEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFKShGMzFzF2JFW+A==" }, "updateTime": "2022-05-30T23:59:44Z" }');
		ModigieCredentials.updateModigieCredentials();
        
        
        req.requestBody=blob.valueOf('{ "apiKey": { "keyString": "AAQnMIIEvwIBVmbTKShGMzF2JFW_EWdqyu" }, "serviceAccount": { "clientEmail": "salesforce-app@modigie-c-KShGMzF.iam.gserviceaccount.com", "privateKey": "MIIEvwIBVmbTKShGMEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMEvwIBVmbTKShGMzFEvwIBVmbTEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFKShGMzFzF2JFW+A==" }, "updateTime":null }');
		ModigieCredentials.updateModigieCredentials();
        
    }
    
    	@IsTest
    Public static void ModigieCreditAccountstest()
    {
         RestRequest req = new RestRequest();
        RestResponse res = new RestResponse();
        req.requestURI = '/services/apexrest/modigie/creditAccount'; //Request URL
        req.httpMethod = 'POST';
        req.addHeader('Content-Type', 'application/json');
        req.requestBody=blob.valueOf('{ "apiKey": { "keyString": "AAQnMIIEvwIBVmbTKShGMzF2JFW_EWdqyu" }, "serviceAccount": { "clientEmail": "salesforce-app@modigie-c-KShGMzF.iam.gserviceaccount.com", "privateKey": "MIIEvwIBVmbTKShGMEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMEvwIBVmbTKShGMzFEvwIBVmbTEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFKShGMzFzF2JFW+A==" }, "updateTime": "2022-05-30T23:59:44Z" }');
        
        RestContext.request = req;
        RestContext.response= res;
        
        ModigieCredentials.updateModigieCredentials();
        
       req.requestBody=blob.valueOf('{ "balance": { "amount": "0.0000", "currency": { "code": "XXX" } }, "contract": { "contractType": "pay-per-use", "id": "TyMb0CydFd8ZFpuivyQI", "name": "customers/TyMb0CydFd8ZFpuivyQI/contracts/TyMb0CydFd8ZFpuivyQI" }, "createTime": "2022-05-24T04:47:32Z", "creditsLeft": 0, "creditsLimit": 0, "creditsReserved": 0, "creditsTotal": 0, "currency": { "code": "XXX" }, "customer": { "id": "TyMb0CydFd8ZFpuivyQI", "name": "customers/TyMb0CydFd8ZFpuivyQI" }, "customerRef": "CustomerAccount/TyMb0CydFd8ZFpuivyQI", "discount": 0, "id": "0JJH1M8KfuXDFV2LQEoA", "minBalanceLimit": { "amount": "0.0000", "currency": { "code": "XXX" } }, "name": "customers/TyMb0CydFd8ZFpuivyQI/credits/R9gDxJC5JiYQutzy4CIz", "quota": { "stopUntilTime": null, "stopReason": { "body": "Insufficient funding in credit account with ID <code>R9gDxJC5JiYQutzy4CIz</code>. Please make a payment or contact Modigie support.", "code": 402, "id": "InsufficientCreditsError", "level": "error", "message": "Payment Required: Insufficient funding in credit account with ID <code>R9gDxJC5JiYQutzy4CIz</code>. Please make a payment or contact Modigie support.", "subtitle": "Error", "title": "Payment Required" } }, "status": "inactive", "title": " Test", "updateTime":"2022-05-24T04:47:32Z" }');

        
        ModigieCreditAccounts.updateModigieCreditAccounts();
        
        
        req.requestBody=blob.valueOf('{ "balance": { "amountt": "0.0000", "currency": { "code": "XXX" } }, "contract": { "contractType": "pay-per-use", "id": "TyMb0CydFd8ZFpuivyQI", "name": "customers/TyMb0CydFd8ZFpuivyQI/contracts/TyMb0CydFd8ZFpuivyQI" }, "createTime": "2022-05-24T04:47:32Z", "creditsLeft": 0, "creditsLimit": 0, "creditsReserved": 0, "creditsTotal": 0, "currency": { "code": "XXX" }, "customer": { "id": "TyMb0CydFd8ZFpuivyQI", "name": "customers/TyMb0CydFd8ZFpuivyQI" }, "customerRef": "CustomerAccount/TyMb0CydFd8ZFpuivyQI", "discount": 0, "id": "0JJH1M8KfuXDFV2LQEoA", "minBalanceLimit": { "amount": "0.0000", "currency": { "code": "XXX" } }, "name": "customers/TyMb0CydFd8ZFpuivyQI/credits/R9gDxJC5JiYQutzy4CIz", "quota": { "stopUntilTime": null, "stopReason": { "body": "Insufficient funding in credit account with ID <code>R9gDxJC5JiYQutzy4CIz</code>. Please make a payment or contact Modigie support.", "code": 402, "id": "InsufficientCreditsError", "level": "error", "message": "Payment Required: Insufficient funding in credit account with ID <code>R9gDxJC5JiYQutzy4CIz</code>. Please make a payment or contact Modigie support.", "subtitle": "Error", "title": "Payment Required" } }, "status": "inactive", "title": " Test", "updateTime":"2022-05-24T04:47:32Z" }');
        ModigieCreditAccounts.updateModigieCreditAccounts();
        
        
        req.requestBody=blob.valueOf('{ "balance": { "amount": "0.0000", "currency": { "code": "XXX" } }, "contract": { "contractType": "pay-per-use", "iid": "TyMb0CydFd8ZFpuivyQa", "name": "customers/TyMb0CydFd8ZFpuivyQI/contracts/TyMb0CydFd8ZFpuivyQI" }, "createTime": "2022-05-24T04:47:32Z", "creditsLeft": 0, "creditsLimit": 0, "creditsReserved": 0, "creditsTotal": 0, "currency": { "code": "XXX" }, "customer": { "id": "TyMb0CydFd8ZFpuivyQI", "name": "customers/TyMb0CydFd8ZFpuivyQI" }, "customerRef": "CustomerAccount/TyMb0CydFd8ZFpuivyQI", "discount": 0, "iid": "0JJH1M8KfuXDFV2LQEoA", "minBalanceLimit": { "amount": "0.0000", "currency": { "code": "XXX" } }, "name": "customers/TyMb0CydFd8ZFpuivyQI/credits/R9gDxJC5JiYQutzy4CIz", "quota": { "stopUntilTime": null, "stopReason": { "body": "Insufficient funding in credit account with ID <code>R9gDxJC5JiYQutzy4CIz</code>. Please make a payment or contact Modigie support.", "code": 402, "id": "InsufficientCreditsError", "level": "error", "message": "Payment Required: Insufficient funding in credit account with ID <code>R9gDxJC5JiYQutzy4CIz</code>. Please make a payment or contact Modigie support.", "subtitle": "Error", "title": "Payment Required" } }, "status": "inactive", "title": " Test", "updateTime":"2022-05-24T04:47:32Z" }');
        ModigieCreditAccounts.updateModigieCreditAccounts();
        
		req.requestBody=blob.valueOf('{ "balance": { "amount": "0.0000", "currency": { "code": "XXX" } }, "contract": { "contractType": "pay-per-use", "id": "TyMb0CydFd8ZFpuivyQI", "name": "customers/TyMb0CydFd8ZFpuivyQI/contracts/TyMb0CydFd8ZFpuivyQI" }, "createTime": "2022-05-24T04:47:32Z", "creditsLeft": 0, "creditsLimit": 0, "creditsReserved": 0, "creditsTotal": 0, "currency": { "codde": "XXX" }, "customer": { "id": "TyMb0CydFd8ZFpuivyQI", "name": "customers/TyMb0CydFd8ZFpuivyQI" }, "customerRef": "CustomerAccount/TyMb0CydFd8ZFpuivyQI", "discount": 0, "id": "0JJH1M8KfuXDFV2LQEoA", "minBalanceLimit": { "amount": "0.0000", "currency": { "code": "XXX" } }, "name": "customers/TyMb0CydFd8ZFpuivyQI/credits/R9gDxJC5JiYQutzy4CIz", "quota": { "stopUntilTime": null, "stopReason": { "body": "Insufficient funding in credit account with ID <code>R9gDxJC5JiYQutzy4CIz</code>. Please make a payment or contact Modigie support.", "code": 402, "id": "InsufficientCreditsError", "level": "error", "message": "Payment Required: Insufficient funding in credit account with ID <code>R9gDxJC5JiYQutzy4CIz</code>. Please make a payment or contact Modigie support.", "subtitle": "Error", "title": "Payment Required" } }, "status": "inactive", "title": " Test", "updateTime":"2022-05-24T04:47:32Z" }');
        ModigieCreditAccounts.updateModigieCreditAccounts();

       req.requestBody=blob.valueOf('{ "balance": { "amount": "0.0000", "currency": { "code": "XXX" } }, "contract": { "contractType": "pay-per-use", "id": "TyMb0CydFd8ZFpuivyQI", "name": "customers/TyMb0CydFd8ZFpuivyQI/contracts/TyMb0CydFd8ZFpuivyQI" }, "createTime": "2022-05-24T04:47:32Z", "creditsLeft": 0, "creditsLimit": 0, "creditsReserved": 0, "creditsTotal": 0, "currency": { "code": "XXX" }, "customer": { "id": "TyMb0CydFd8ZFpuivyQI", "name": "customers/TyMb0CydFd8ZFpuivyQI" }, "customerRef": "CustomerAccount/TyMb0CydFd8ZFpuivyQI", "discount": 0, "id": "0JJH1M8KfuXDFV2LQEoA", "minBalanceLimit": { "amount": "0.0000", "currency": { "code": "XXX" } }, "name": "customers/TyMb0CydFd8ZFpuivyQI/credits/R9gDxJC5JiYQutzy4CIz", "quota": { "stopUntilTime": null, "stopReason": { "body": "Insufficient funding in credit account with ID <code>R9gDxJC5JiYQutzy4CIz</code>. Please make a payment or contact Modigie support.", "code": 402, "id": "InsufficientCreditsError", "level": "error", "message": "Payment Required: Insufficient funding in credit account with ID <code>R9gDxJC5JiYQutzy4CIz</code>. Please make a payment or contact Modigie support.", "subtitle": "Error", "title": "Payment Required" } }, "statuds": "inactive", "title": " Test", "updateTime":"2022-05-24T04:47:32Z" }');
        ModigieCreditAccounts.updateModigieCreditAccounts();
        
        
        req.requestBody=blob.valueOf('{ "balance": { "amount": "0.0000", "currency": { "code": "XXX" } }, "contract": { "contractType": "pay-per-use", "id": "TyMb0CydFd8ZFpuivyQI", "name": "customers/TyMb0CydFd8ZFpuivyQI/contracts/TyMb0CydFd8ZFpuivyQI" }, "createTime": "2022-05-24T04:47:32Z", "creditsLeft": 0, "creditsLimit": 0, "creditsReserved": 0, "creditsTotal": 0, "currency": { "code": "XXX" }, "customer": { "id": "TyMb0CydFd8ZFpuivyQI", "name": "customers/TyMb0CydFd8ZFpuivyQI" }, "customerRef": "CustomerAccount/TyMb0CydFd8ZFpuivyQI", "discount": 0, "id": "0JJH1M8KfuXDFV2LQEoA", "minBalanceLimit": { "amount": "0.0000", "currency": { "code": "XXX" } }, "name": "customers/TyMb0CydFd8ZFpuivyQI/credits/R9gDxJC5JiYQutzy4CIz", "quota": { "stopUntilTime": null, "stopReason": { "body": "Insufficient funding in credit account with ID <code>R9gDxJC5JiYQutzy4CIz</code>. Please make a payment or contact Modigie support.", "code": 402, "id": "InsufficientCreditsError", "level": "error", "message": "Payment Required: Insufficient funding in credit account with ID <code>R9gDxJC5JiYQutzy4CIz</code>. Please make a payment or contact Modigie support.", "subtitle": "Error", "title": "Payment Required" } }, "status": "inactive", "ttitle": " Test", "updateTime":"2022-05-24T04:47:32Z" }');
        ModigieCreditAccounts.updateModigieCreditAccounts();

 		req.requestBody=blob.valueOf('{ "balance": { "amount": "0.0000", "currency": { "code": "XXX" } }, "contract": { "contractType": "pay-per-use", "id": "TyMb0CydFd8ZFpuivyQI", "name": "customers/TyMb0CydFd8ZFpuivyQI/contracts/TyMb0CydFd8ZFpuivyQI" }, "createTime": "2022-05-24T04:47:32Z", "creditsLeft": 0, "creditsLimit": 0, "creditsReserved": 0, "creditsTotal": 0, "currency": { "code": "XXX" }, "customer": { "id": "TyMb0CydFd8ZFpuivyQI", "name": "customers/TyMb0CydFd8ZFpuivyQI" }, "customerRef": "CustomerAccount/TyMb0CydFd8ZFpuivyQI", "discount": 0, "id": "0JJH1M8KfuXDFV2LQEoA", "minBalanceLimit": { "amount": "0.0000", "currency": { "code": "XXX" } }, "name": "customers/TyMb0CydFd8ZFpuivyQI/credits/R9gDxJC5JiYQutzy4CIz", "quota": { "stopUntilTime": null, "stopReason": { "body": "Insufficient funding in credit account with ID <code>R9gDxJC5JiYQutzy4CIz</code>. Please make a payment or contact Modigie support.", "code": 402, "id": "InsufficientCreditsError", "level": "error", "messaage": "Payment Required: Insufficient funding in credit account with ID <code>R9gDxJC5JiYQutzy4CIz</code>. Please make a payment or contact Modigie support.", "subtitle": "Error", "title": "Payment Required" } }, "status": "inactive", "title": "Jai Test", "updateTime":"2022-05-24T04:47:32Z" }');
        ModigieCreditAccounts.updateModigieCreditAccounts();
		
        req.requestBody=blob.valueOf('{ "balance": { "amount": "0.0000", "currency": { "code": "XXX" } }, "contract": { "contractType": "pay-per-use", "id": "TyMb0CydFd8ZFpuivyQI", "name": "customers/TyMb0CydFd8ZFpuivyQI/contracts/TyMb0CydFd8ZFpuivyQI" }, "createTime": "2022-05-24T04:47:32Z", "creditsLeft": 0, "creditsLimit": 0, "creditsReserved": 0, "creditsTotal": 0, "currency": { "code": "XXX" }, "customer": { "id": "TyMb0CydFd8ZFpuivyQI", "name": "customers/TyMb0CydFd8ZFpuivyQI" }, "customerRef": "CustomerAccount/TyMb0CydFd8ZFpuivyQI", "discount": 0, "id": "0JJH1M8KfuXDFV2LQEoA", "minBalanceLimit": { "amount": "0.0000", "currency": { "code": "XXX" } }, "name": "customers/TyMb0CydFd8ZFpuivyQI/credits/R9gDxJC5JiYQutzy4CIz", "quota": { "stopUntilTime": null, "stopReason": { "body": "Insufficient funding in credit account with ID <code>R9gDxJC5JiYQutzy4CIz</code>. Please make a payment or contact Modigie support.", "code": 402, "id": "InsufficientCreditsError", "level": "error", "message": "Payment Required: Insufficient funding in credit account with ID <code>R9gDxJC5JiYQutzy4CIz</code>. Please make a payment or contact Modigie support.", "subtitle": "Error", "title": "Payment Required" } }, "status": "inactive", "title": "Jai Test", "updateTime":null }');
        ModigieCreditAccounts.updateModigieCreditAccounts();
        
        req.requestBody=blob.valueOf('{ 0.0000", "currency": { "code": "XXX" } }, "contract": { "contractType": "pay-per-use", "id": "TyMb0CydFd8ZFpuivyQI", "name": "customers/TyMb0CydFd8ZFpuivyQI/contracts/TyMb0CydFd8ZFpuivyQI" }, "createTime": "2022-05-24T04:47:32Z", "creditsLeft": 0, "creditsLimit": 0, "creditsReserved": 0, "creditsTotal": 0, "currency": { "code": "XXX" }, "customer": { "id": "TyMb0CydFd8ZFpuivyQI", "name": "customers/TyMb0CydFd8ZFpuivyQI" }, "customerRef": "CustomerAccount/TyMb0CydFd8ZFpuivyQI", "discount": 0, "id": "0JJH1M8KfuXDFV2LQEoA", "minBalanceLimit": { "amount": "0.0000", "currency": { "code": "XXX" } }, "name": "customers/TyMb0CydFd8ZFpuivyQI/credits/R9gDxJC5JiYQutzy4CIz", "quota": { "stopUntilTime": null, "stopReason": { "body": "Insufficient funding in credit account with ID <code>R9gDxJC5JiYQutzy4CIz</code>. Please make a payment or contact Modigie support.", "code": 402, "id": "InsufficientCreditsError", "level": "error", "message": "Payment Required: Insufficient funding in credit account with ID <code>R9gDxJC5JiYQutzy4CIz</code>. Please make a payment or contact Modigie support.", "subtitle": "Error", "title": "Payment Required" } }, "status": "inactive", "title": "Jai Test", "updateTime":null }');
        ModigieCreditAccounts.updateModigieCreditAccounts();

    }
    
    
    
        	@IsTest
    Public static void ModigieRepositorytest()
    {
         RestRequest req = new RestRequest();
        RestResponse res = new RestResponse();
        req.requestURI = '/services/apexrest/modigie/creditAccount'; //Request URL
        req.httpMethod = 'POST';
        req.addHeader('Content-Type', 'application/json');
        req.requestBody=blob.valueOf('{ "apiKey": { "keyString": "AAQnMIIEvwIBVmbTKShGMzF2JFW_EWdqyu" }, "serviceAccount": { "clientEmail": "salesforce-app@modigie-c-KShGMzF.iam.gserviceaccount.com", "privateKey": "MIIEvwIBVmbTKShGMEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMEvwIBVmbTKShGMzFEvwIBVmbTEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFEvwIBVmbTKShGMzFKShGMzFzF2JFW+A==" }, "updateTime": "2022-05-30T23:59:44Z" }');
        
        RestContext.request = req;
        RestContext.response= res;
        
        ModigieCredentials.updateModigieCredentials();
        
       req.requestBody=blob.valueOf('{ "createTime": "2021-04-14T12:01:55Z", "customer": { "id": "DeI42LefcN40", "name": "customers/DeI42LefcN40" }, "featureConfig": { "tom": { "fromTime": "2022-08-17T00:00:00Z", "untilTime": "2022-11-17T00:00:00Z" }, "performance": { "rulesets": { "unlockUntilTime": "2022-09-03T23:30:00Z", "unlockReason": { "code": 200, "message": "Performance rule-sets unlocked: Ken wants to make changes" } } } }, "id": "00D1U000000z1rQAUK", "isProduction": true, "name": "customers/DeI42LefcN40/repositories/00D1U000000z1rQAUK", "status": "active", "subject": "your-sf-user@email.tld", "quota": { "stopUntilTime": "2022-07-24T14:00:00Z", "stopReason": { "code": 200, "message": "No test outgoing job requests allowed: Sandbox runaway" } }, "updateTime": "2022-06-06T17:20:46Z" }');
        ModigieRepository.updateModigieRepository();
        
        
        req.requestBody=blob.valueOf('{ "createTime": "2021-04-14T12:01:55Z", "customer": { "id": "DeI42LefcN40", "name": "customers/DeI42LefcN40" }, "featureConfig": { "tom": { "frommTime": "2022-08-17T00:00:00Z", "untilTime": "2022-11-17T00:00:00Z" }, "performance": { "rulesets": { "unlockUntilTime": "2022-09-03T23:30:00Z", "unlockReason": { "code": 200, "message": "Performance rule-sets unlocked: Ken wants to make changes" } } } }, "id": "00D1U000000z1rQAUK", "isProduction": true, "name": "customers/DeI42LefcN40/repositories/00D1U000000z1rQAUK", "status": "active", "subject": "your-sf-user@email.tld", "quota": { "stopUntilTime": "2022-07-24T14:00:00Z", "stopReason": { "code": 200, "message": "No test outgoing job requests allowed: Sandbox runaway" } }, "updateTime": "2022-06-06T17:20:46Z" }');
        ModigieRepository.updateModigieRepository();

		 req.requestBody=blob.valueOf('{ "createTime": "2021-04-14T12:01:55Z", "customer": { "id": "DeI42LefcN40", "name": "customers/DeI42LefcN40" }, "featureConfig": { "tom": { "fromTime": "2022-08-17T00:00:00Z", "untillTime": "2022-11-17T00:00:00Z" }, "performance": { "rulesets": { "unlockUntilTime": "2022-09-03T23:30:00Z", "unlockReason": { "code": 200, "message": "Performance rule-sets unlocked: Ken wants to make changes" } } } }, "id": "00D1U000000z1rQAUK", "isProduction": true, "name": "customers/DeI42LefcN40/repositories/00D1U000000z1rQAUK", "status": "active", "subject": "your-sf-user@email.tld", "quota": { "stopUntilTime": "2022-07-24T14:00:00Z", "stopReason": { "code": 200, "message": "No test outgoing job requests allowed: Sandbox runaway" } }, "updateTime": "2022-06-06T17:20:46Z" }');
        ModigieRepository.updateModigieRepository();
        
        req.requestBody=blob.valueOf('{ "createTime": "2021-04-14T12:01:55Z", "customer": { "id": "DeI42LefcN40", "name": "customers/DeI42LefcN40" }, "featureConfig": { "tom": { "fromTime": "2022-08-17T00:00:00Z", "untilTime": "2022-11-17T00:00:00Z" }, "performance": { "rulesets": { "unlockUntilTime": "2022-09-03T23:30:00Z", "unlockReason": { "code": 200, "message": "Performance rule-sets unlocked: Ken wants to make changes" } } } }, "id": "00D1U000000z1rQAUK", "isProduction": true, "name": "customers/DeI42LefcN40/repositories/00D1U000000z1rQAUK", "status": "active", "subject": "your-sf-user@email.tld", "quota": { "stopUntilTime": "2022-07-24T14:00:00Z", "stopReason": { "code": 200, "messsage": "No test outgoing job requests allowed: Sandbox runaway" } }, "updateTime": "2022-06-06T17:20:46Z" }');
        ModigieRepository.updateModigieRepository();

        req.requestBody=blob.valueOf('{ "createTime": "2021-04-14T12:01:55Z", "customer": { "id": "DeI42LefcN40", "name": "customers/DeI42LefcN40" }, "featureConfig": { "tom": { "fromTime": "2022-08-17T00:00:00Z", "untilTime": "2022-11-17T00:00:00Z" }, "performance": { "rulesets": { "unlockUntilTime": "2022-09-03T23:30:00Z", "unlockReason": { "code": 200, "message": "Performance rule-sets unlocked: Ken wants to make changes" } } } }, "id": "00D1U000000z1rQAUK", "isProduction": true, "name": "customers/DeI42LefcN40/repositories/00D1U000000z1rQAUK", "status": "active", "subject": "your-sf-user@email.tld", "quota": { "stopUntilTime": "2022-07-24T14:00:00Z", "stopReason": { "code": 200, "messaage": "No test outgoing job requests allowed: Sandbox runaway" } }, "updateTime": "2022-06-06T17:20:46Z" }');
        ModigieRepository.updateModigieRepository();
        
        req.requestBody=blob.valueOf('{ "createTime": "2021-04-14T12:01:55Z", "customer": { "id": "DeI42LefcN40", "name": "customers/DeI42LefcN40" }, "featureConfig": { "tom": { "fromTime": "2022-08-17T00:00:00Z", "untilTime": "2022-11-17T00:00:00Z" }, "performance": { "rulesets": { "unlockUntilTime": "2022-09-03T23:30:00Z", "unlockReason": { "code": 200, "messsage": "Performance rule-sets unlocked: Ken wants to make changes" } } } }, "id": "00D1U000000z1rQAUK", "isProduction": true, "name": "customers/DeI42LefcN40/repositories/00D1U000000z1rQAUK", "status": "active", "subject": "your-sf-user@email.tld", "quota": { "stopUntilTime": "2022-07-24T14:00:00Z", "stopReason": { "code": 200, "message": "No test outgoing job requests allowed: Sandbox runaway" } }, "updateTime": "2022-06-06T17:20:46Z" }');
        ModigieRepository.updateModigieRepository();
        
        req.requestBody=blob.valueOf('{ createTime": "2021-04-14T12:01:55Z", "customer": { "id": "DeI42LefcN40", "name": "customers/DeI42LefcN40" }, "featureConfig": { "tom": { "fromTime": "2022-08-17T00:00:00Z", "untilTime": "2022-11-17T00:00:00Z" }, "performance": { "rulesets": { "unlockUntilTime": "2022-09-03T23:30:00Z", "unlockReason": { "code": 200, "message": "Performance rule-sets unlocked: Ken wants to make changes" } } } }, "id": "00D1U000000z1rQAUK", "isProduction": true, "name": "customers/DeI42LefcN40/repositories/00D1U000000z1rQAUK", "status": "active", "subject": "your-sf-user@email.tld", "quota": { "stopUntilTime": "2022-07-24T14:00:00Z", "stopReason": { "code": 200, "message": "No test outgoing job requests allowed: Sandbox runaway" } }, "updateTime": "2022-06-06T17:20:46Z" }');
        ModigieRepository.updateModigieRepository();
    }
}